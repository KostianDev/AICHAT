<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="aichat.ui.MainController"
            prefWidth="1400" prefHeight="900">
    
    <top>
        <VBox>
            <MenuBar>
                <menus>
                    <Menu text="File">
                        <items>
                            <MenuItem text="Load Source Image" onAction="#handleLoadSource"/>
                            <MenuItem text="Load Target Image" onAction="#handleLoadTarget"/>
                            <SeparatorMenuItem/>
                            <MenuItem text="Exit" onAction="#handleExit"/>
                        </items>
                    </Menu>
                    <Menu text="Help">
                        <items>
                            <MenuItem text="About" onAction="#handleAbout"/>
                        </items>
                    </Menu>
                </menus>
            </MenuBar>
            
            <ToolBar>
                <Button fx:id="loadSourceButton" text="Load Source" onAction="#handleLoadSource"/>
                <Button fx:id="loadTargetButton" text="Load Target" onAction="#handleLoadTarget"/>
                <Separator/>
                
                <Label text="Algorithm:"/>
                <ComboBox fx:id="algorithmCombo" prefWidth="100"/>
                
                <Label text="Color Model:"/>
                <ComboBox fx:id="colorModelCombo" prefWidth="100"/>
                
                <Label text="Colors (k):"/>
                <Spinner fx:id="kSpinner" prefWidth="70"/>
                
                <Separator/>
                <Button fx:id="analyzeButton" text="Analyze" onAction="#handleAnalyze"/>
                <Button fx:id="resynthesizeButton" text="Resynthesize" onAction="#handleResynthesize"/>
            </ToolBar>
        </VBox>
    </top>
    
    <center>
        <SplitPane fx:id="mainSplitPane" dividerPositions="0.5" orientation="HORIZONTAL">
            <VBox spacing="10" style="-fx-padding: 15;">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Source Image" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="Load" onAction="#handleLoadSource" style="-fx-font-size: 11px;"/>
                </HBox>
                <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS" 
                            style="-fx-background-color: #2b2b2b;">
                    <ImageView fx:id="sourceImageView" preserveRatio="true"/>
                </ScrollPane>
                <TitledPane text="Source Palette" expanded="true" collapsible="true">
                    <FlowPane fx:id="sourcePalettePane" hgap="5" vgap="5" prefHeight="90" 
                              style="-fx-padding: 8;"/>
                </TitledPane>
            </VBox>
            
            <VBox spacing="10" style="-fx-padding: 15;">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Target Image" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="Load" onAction="#handleLoadTarget" style="-fx-font-size: 11px;"/>
                </HBox>
                <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS"
                            style="-fx-background-color: #2b2b2b;">
                    <ImageView fx:id="targetImageView" preserveRatio="true"/>
                </ScrollPane>
                <TitledPane text="Target Palette" expanded="true" collapsible="true">
                    <FlowPane fx:id="targetPalettePane" hgap="5" vgap="5" prefHeight="90"
                              style="-fx-padding: 8;"/>
                </TitledPane>
            </VBox>
        </SplitPane>
    </center>
    
    <bottom>
        <HBox spacing="10" style="-fx-padding: 10; -fx-background-color: #f0f0f0;">
            <ProgressBar fx:id="progressBar" prefWidth="200"/>
            <Label fx:id="statusLabel" text="Ready"/>
        </HBox>
    </bottom>
</BorderPane>
